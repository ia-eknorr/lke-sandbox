# Environment-specific domain (override per cluster)
domain: sandbox-do.knorr.casa

# Traefik Helm values for Gateway API mode
traefik:
  # Enable Gateway API provider
  providers:
    kubernetesGateway:
      enabled: true

  # Disable default IngressRoute provider (using Gateway API instead)
  ingressRoute:
    dashboard:
      enabled: false

  api:
    dashboard: true
    insecure: true

  service:
    type: LoadBalancer
    annotations:
      # Linode-specific annotations (optional)
      service.beta.kubernetes.io/linode-loadbalancer-throttle: "4"

  # Gateway is managed via templates/gateway.yaml for domain parameterization
  gateway:
    enabled: false

  # Entry points
  ports:
    traefik:
      port: 9000
      expose:
        default: true
      exposedPort: 9000
      protocol: TCP
    web:
      port: 8000
      exposedPort: 80
      protocol: TCP
      redirections:
        entryPoint:
          to: websecure
          scheme: https
          permanent: true   
    websecure:
      port: 8443
      exposedPort: 443
      protocol: TCP

  # Enable access logs (optional, helpful for debugging)
  logs:
    access:
      enabled: true

  # Resource limits
  resources:
    requests:
      cpu: "100m"
      memory: "128Mi"
    limits:
      cpu: "500m"
      memory: "256Mi"

  # Dashboard HTTPRoute is managed via templates/dashboard-route.yaml
  additionalArguments:
  - "--api.insecure=true"